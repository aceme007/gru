<div class="mdl-grid" ng-controller="editQuizController as editQuizVm">
  <div class="mdl-cell mdl-cell--5-col">
    <div class="scroll-fix mdl-shadow--2dp">
      <h5 class="mt-0">Update Quiz</h5>
      <form ng-submit="quizVm.submitQuiz()">
        <div class="mdl-grid no-pad no-margin-lr">
          <div class="mdl-cell mdl-cell--12-col">
            <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label" ng-class="{'is-dirty': quizVm.quiz.name}">
              <input class="mdl-textfield__input" type="text" name="text" id="quiz-name" ng-model="quizVm.quiz.name">
              <label class="mdl-textfield__label" for="quiz-name">Quiz name</label>
            </div>
          </div>
        </div>
        <div class="mdl-grid no-pad no-margin-lr">
          <div class="mdl-cell mdl-cell--12-col">
            <div class="duration-inputs">
              <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label" ng-class="{'is-dirty': quizVm.quiz.duration >= 0}">
                <input class="mdl-textfield__input" type="number" pattern="-?[0-9]*(\.[0-9]+)?" ng-model="quizVm.quiz.duration" id="minutes" min="0" max="120">
                <label class="mdl-textfield__label" for="minutes">Duration (minutes)</label>
                <span class="mdl-textfield__error">Not Valid</span>
              </div>
            </div>
          </div>
        </div>
        <div class="mdl-grid no-pad no-margin-lr">
          <div class="mdl-cell mdl-cell--12-col">
            <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label" ng-class="{'is-dirty': quizVm.quiz.cut_off != undefined}">
              <input class="mdl-textfield__input" type="number" name="text" id="cut_off" ng-model="quizVm.quiz.cut_off">
              <label class="mdl-textfield__label" for="cut_off">Cut off</label>
            </div>
          </div>
        </div>
        <div class="mdl-grid no-pad no-margin-lr">
          <div class="mdl-cell mdl-cell--12-col">
            <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label" ng-class="{'is-dirty': quizVm.quiz.threshold != undefined}">
              <input class="mdl-textfield__input" type="number" name="text" id="threshold" ng-model="quizVm.quiz.threshold" step="0.01">
              <label class="mdl-textfield__label" for="threshold">Threshold</label>
            </div>
          </div>
        </div>
        <div class="bold pb-10">
          {{ quizVm.quizQuestions().length }}
          Question{{quizVm.quizQuestions().length != 1 ? "s" : ""}},
          Max Score: {{quizVm.getTotalScore() | number: 2}}
        </div>
        <div class="mt-20">
          <button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect action-btn" type="submit">
            Update Quiz
          </button>
          <button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect ml-20" type="reset" ng-click="mainVm.goTo('quiz.all')">
            Cancel
          </button>
        </div>
      </form>
    </div>
  </div>
  <div class="mdl-cell mdl-cell--6-col mdl-cell--1-offset-desktop">
    <div ng-include="'app/components/quiz/question-selection.html'"></div>
    <h5>Questions in this quiz</h5>
    <div class="question mt-20 clickable-hover" ng-repeat="question in quizVm.quizQuestions()" style="padding-left: 32px; position: relative;">
      <a ng-click="quizVm.removeQuestion(question)" class="hover-link" href="#" style="display: block; float: left; position: absolute; top: 50%; margin-top: -10px; left: 2px;">
        <i class="material-icons mdi-sm text-red">delete</i>
      </a>

      {{question.name}}
      <div
          ng-repeat="tag in question.tags"
          class="tag-filter capitalize inline-block"
      >
        {{tag.name}}
      </div>

      <a ui-sref="question.edit({quesID: question.uid, returnQuizId: editQuizVm.quizId})"
          class="hover-link"
      >
        Edit
      </a>

      <div class="base-font">
        Score: <span class="text-green bold">+ {{question.positive}}</span> |
        <span class="text-red bold">- {{question.negative}}</span>
        &nbsp;&nbsp;
        <i ng-if="question.correct.length == 1" class="material-icons" style="font-size:16px">done</i>
        <i ng-if="question.correct.length > 1" class="material-icons" style="font-size:16px">done_all</i>
      </div>
      <span ng-repeat="tag in question['question.tag']">
        <span class="mdl-chip">
          <span class="mdl-chip__text">{{tag.name}}</span>
        </span>
      </span>
    </div>
  </div>
</div>
